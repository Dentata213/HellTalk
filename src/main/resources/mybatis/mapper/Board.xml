<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.Board">
  	
  	<!-- 전체 게시글 보기 -->
	<select id="selectBBS" resultType="BBSDto">
		SELECT
		u.U_NO as no,
		U_ID as id,
		U_NICKNAME as u_nickname,
		P_CONTENT as content,
		P_TITLE as title
		FROM BBS b JOIN USERS u ON u.U_NO=b.U_NO
	</select>
	 
	<!-- 게시글 등록 -->
	<insert id="insertBBS" parameterType="Map">
		INSERT INTO BBS VALUES(SEQ_BBS.NEXTVAL,#{U_NO},#{P_KIND},#{P_TITLE},#{P_CONTENT},SYSDATE,null,null,0,0,
		<if test="img!=null">
			#{img}
		</if>
		<if test="img==null">
			null
		</if>
		
		)
	</insert>
	
	<!-- 게시글 수정 -->
	<update id="editBBS" parameterType="Map">
		UPDATE BBS SET P_TITLE=#{title},P_CONTENT=#{content} WHERE P_NO=#{no}
	</update>
	
	<!-- 게시글 삭제 -->
	<delete id="deleteBBS" parameterType="Map">
		DELETE BBS WHERE P_no=#{no}
	</delete>
</mapper>